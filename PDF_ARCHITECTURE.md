# PDF Generation System - Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              QuotationPage.js Component                       â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ Client      â”‚  â”‚ Window Form  â”‚  â”‚  Action Buttons  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ Selection   â”‚  â”‚ - Type       â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ - Name      â”‚  â”‚ - Dimensions â”‚  â”‚  â”‚ ğŸ“„ Downloadâ”‚  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ - Address   â”‚  â”‚ - Glass      â”‚  â”‚  â”‚    PDF     â”‚  â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Frame      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ â”‚
â”‚  â”‚                   â”‚ - Pricing    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚ â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ ğŸ’¾ Save    â”‚  â”‚    â”‚ â”‚
â”‚  â”‚                                     â”‚  â”‚ Quotation  â”‚  â”‚    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  Added Windows List          â”‚  â”‚                   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  - W1: Living Room [Edit]    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚  â”‚  - W2: Bedroom [Edit]        â”‚                          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  STATE: quotationData {                                    â”‚ â”‚
â”‚  â”‚    quotationNumber, project, date,                         â”‚ â”‚
â”‚  â”‚    companyDetails, clientDetails,                          â”‚ â”‚
â”‚  â”‚    windowSpecs: [ {...}, {...}, ... ]                      â”‚ â”‚
â”‚  â”‚  }                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ onClick="handleDownloadPDF()"
                              â”‚ Passes: quotationData
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PDF GENERATOR UTILITY                          â”‚
â”‚                   (utils/pdfGenerator.js)                           â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  generateQuotationPDF(quotationData)                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ Validates input data                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ Creates new jsPDF instance                                â”‚ â”‚
â”‚  â”‚  â””â”€ Returns: { success, fileName, error }                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                      â”‚
â”‚                              â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  QuotationPDFGenerator Class                                  â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Properties:                                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ pdf: jsPDF instance                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ pageWidth: 210mm (A4)                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ pageHeight: 297mm (A4)                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ margin: 15mm                                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ currentY: current vertical position                       â”‚ â”‚
â”‚  â”‚  â””â”€ colors: { primary, secondary, accent, ... }               â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Methods (in execution order):                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ 1. generatePDF(quotationData)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Initialize PDF document                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Add page 1 content                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Loop through windows                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Add summary page                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Add page numbers                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Save PDF file                                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Page Building Methods:                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ 2. addHeader(quotationData)                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Company name, contact info (blue header)          â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 3. addQuoteInfo(quotationData)                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Quote #, project, date (gray bar)                 â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 4. addClientDetails(quotationData)                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ To: [Client name & address]                       â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 5. addIntroduction()                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Professional greeting & overview                  â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 6. addWindowSpecification(spec, index) [LOOP]           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ addBasicInfoTable(spec)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ addWindowDiagram(spec) â† uses html2canvas         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ addSpecificationsTable(spec)                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ addComputedValues(spec)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 7. addQuoteTotals(quotationData)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Components, area, costs, GST, grand total         â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 8. addTermsAndConditions()                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Payment, delivery, warranty terms                 â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ 9. addPageNumbers()                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Footer on all pages (Page X of Y)                 â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Helper Methods:                                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ generateWindowSVG(spec) â†’ SVG string                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ formatWindowType(type) â†’ "Sliding Window"                â”‚ â”‚
â”‚  â”‚  â”œâ”€ formatGlassType(glass) â†’ "Clear 5mm"                      â”‚ â”‚
â”‚  â”‚  â””â”€ formatFrameMaterial(material) â†’ "Aluminum"               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Uses Libraries
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXTERNAL LIBRARIES                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚       jsPDF          â”‚        â”‚    html2canvas       â”‚          â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚  â”‚  â”‚ PDF Creation   â”‚  â”‚        â”‚  â”‚ SVG to Image   â”‚  â”‚          â”‚
â”‚  â”‚  â”‚ Text Drawing   â”‚  â”‚        â”‚  â”‚ Canvas Render  â”‚  â”‚          â”‚
â”‚  â”‚  â”‚ Tables         â”‚  â”‚        â”‚  â”‚ High Quality   â”‚  â”‚          â”‚
â”‚  â”‚  â”‚ Shapes         â”‚  â”‚        â”‚  â”‚ 2x Scale       â”‚  â”‚          â”‚
â”‚  â”‚  â”‚ Colors         â”‚  â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚  â”‚  â”‚ Multi-page     â”‚  â”‚        â”‚                      â”‚          â”‚
â”‚  â”‚  â”‚ Save/Download  â”‚  â”‚        â”‚                      â”‚          â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Generates & Downloads
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OUTPUT (PDF FILE)                           â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“„ Quotation_QT-1729434567890_2025-10-20.pdf                      â”‚
â”‚                                                                     â”‚
â”‚  Size: ~500KB - 5MB (depending on # of windows)                    â”‚
â”‚  Format: PDF/A4                                                    â”‚
â”‚  Pages: 3-50+ (varies with window count)                           â”‚
â”‚  Quality: Print-ready, Client-ready                                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ 1. Fills form
      â”‚ 2. Clicks "Download PDF"
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  QuotationPage.js   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ quotationData  â”‚ â”‚ â† State with all form data
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ 3. handleDownloadPDF()
          â”‚    calls generateQuotationPDF(quotationData)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  pdfGenerator.js         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Validation          â”‚ â”‚ â† Check windows exist, client filled
â”‚  â”‚ â”œâ”€ Has windows?     â”‚ â”‚
â”‚  â”‚ â””â”€ Has client?      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚               â”‚
â”‚           â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Create PDF          â”‚ â”‚
â”‚  â”‚ â”œâ”€ Initialize       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Add header       â”‚ â”‚ â† Company branding
â”‚  â”‚ â”œâ”€ Add quote info   â”‚ â”‚ â† Quote #, date, project
â”‚  â”‚ â”œâ”€ Add client       â”‚ â”‚ â† Client details
â”‚  â”‚ â”œâ”€ Add intro        â”‚ â”‚ â† Professional text
â”‚  â”‚ â””â”€ Loop windows     â”‚ â”‚â”€â”
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚           â”‚               â”‚ â”‚
â”‚           â”‚ For each      â”‚ â”‚
â”‚           â”‚ window:       â”‚ â”‚
â”‚           â–¼               â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â—„â”˜
â”‚  â”‚ Add Window Page     â”‚ â”‚
â”‚  â”‚ â”œâ”€ Basic info table â”‚ â”‚ â† ID, type, size
â”‚  â”‚ â”œâ”€ Diagram (SVG)    â”‚ â”‚ â† Visual representation
â”‚  â”‚ â”œâ”€ Specifications   â”‚ â”‚ â† Glass, frame, etc.
â”‚  â”‚ â””â”€ Pricing table    â”‚ â”‚ â† Costs, sq.ft., total
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚               â”‚
â”‚           â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Add Summary Page    â”‚ â”‚
â”‚  â”‚ â”œâ”€ Total components â”‚ â”‚
â”‚  â”‚ â”œâ”€ Total area       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Costs breakdown  â”‚ â”‚
â”‚  â”‚ â”œâ”€ GST calculation  â”‚ â”‚
â”‚  â”‚ â””â”€ Grand total      â”‚ â”‚ â† Highlighted
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚               â”‚
â”‚           â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Add Terms & Sign    â”‚ â”‚
â”‚  â”‚ â”œâ”€ T&C list         â”‚ â”‚
â”‚  â”‚ â””â”€ Signature space  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚               â”‚
â”‚           â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Finalize            â”‚ â”‚
â”‚  â”‚ â”œâ”€ Add page numbers â”‚ â”‚ â† All pages
â”‚  â”‚ â”œâ”€ Add footers      â”‚ â”‚ â† Date, company
â”‚  â”‚ â””â”€ Save file        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ 4. Returns { success, fileName }
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  QuotationPage.js    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ handleResponse â”‚  â”‚
â”‚  â”‚ â”œâ”€ Success?    â”‚  â”‚
â”‚  â”‚ â”‚  â””â”€ Alert âœ“  â”‚  â”‚
â”‚  â”‚ â””â”€ Error?      â”‚  â”‚
â”‚  â”‚    â””â”€ Alert âœ—  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 5. PDF downloaded
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER'S DOWNLOADS   â”‚
â”‚  ğŸ“„ Quotation_....  â”‚
â”‚     .pdf            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   QuotationPage.js                       â”‚
â”‚                                                          â”‚
â”‚  State Management:                                       â”‚
â”‚  â”œâ”€ [quotationData, setQuotationData]                   â”‚
â”‚  â”œâ”€ [currentWindow, setCurrentWindow]                   â”‚
â”‚  â”œâ”€ [clients, setClients]                               â”‚
â”‚  â””â”€ [inventory, setInventory]                           â”‚
â”‚                                                          â”‚
â”‚  Event Handlers:                                         â”‚
â”‚  â”œâ”€ handleDownloadPDF() â† NEW âœ¨                         â”‚
â”‚  â”œâ”€ saveQuotation()                                      â”‚
â”‚  â”œâ”€ addWindowToQuote()                                   â”‚
â”‚  â”œâ”€ editWindow()                                         â”‚
â”‚  â””â”€ removeWindow()                                       â”‚
â”‚                                                          â”‚
â”‚  Imports:                                                â”‚
â”‚  â”œâ”€ ClientService                                        â”‚
â”‚  â”œâ”€ InventoryService                                     â”‚
â”‚  â””â”€ generateQuotationPDF â† NEW âœ¨                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Independent, no coupling
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              utils/pdfGenerator.js                       â”‚
â”‚                                                          â”‚
â”‚  Exports:                                                â”‚
â”‚  â”œâ”€ generateQuotationPDF(quotationData) â† Main function â”‚
â”‚  â””â”€ pdfGenerator â† Singleton instance                    â”‚
â”‚                                                          â”‚
â”‚  Internal Class:                                         â”‚
â”‚  â””â”€ QuotationPDFGenerator                                â”‚
â”‚     â”œâ”€ No external dependencies                          â”‚
â”‚     â”œâ”€ Pure PDF logic                                    â”‚
â”‚     â””â”€ Self-contained                                    â”‚
â”‚                                                          â”‚
â”‚  Libraries Used:                                         â”‚
â”‚  â”œâ”€ jsPDF (npm package)                                  â”‚
â”‚  â””â”€ html2canvas (npm package)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Tree

```
CRM/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ QuotationPage.js âš™ï¸ (Modified)
â”‚   â”‚   â”‚   â””â”€â”€ Imports: generateQuotationPDF
â”‚   â”‚   â”‚   â””â”€â”€ Added: handleDownloadPDF()
â”‚   â”‚   â”‚   â””â”€â”€ Added: "Download PDF" button
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ pdfGenerator.js âœ¨ (NEW)
â”‚   â”‚   â”‚       â””â”€â”€ Class: QuotationPDFGenerator
â”‚   â”‚   â”‚       â””â”€â”€ Export: generateQuotationPDF()
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClientService.js
â”‚   â”‚   â”‚   â””â”€â”€ InventoryService.js
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ QuotationPage.css
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json âš™ï¸ (Modified)
â”‚   â”‚   â””â”€â”€ Added: jspdf, html2canvas
â”‚   â”‚
â”‚   â””â”€â”€ node_modules/
â”‚       â”œâ”€â”€ jspdf/
â”‚       â””â”€â”€ html2canvas/
â”‚
â”œâ”€â”€ PDF_GENERATION_DOCUMENTATION.md âœ¨ (NEW)
â”œâ”€â”€ PDF_USER_GUIDE.md âœ¨ (NEW)
â”œâ”€â”€ PDF_QUICK_REFERENCE.md âœ¨ (NEW)
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md âœ¨ (NEW)
â””â”€â”€ PDF_ARCHITECTURE.md âœ¨ (THIS FILE)

Legend:
âœ¨ = New file created
âš™ï¸ = Existing file modified
```

---

## Execution Flow Timeline

```
Time â†’
â”‚
â”œâ”€ User clicks "Download PDF"
â”‚  â””â”€ Event: onClick
â”‚     â””â”€ Calls: handleDownloadPDF()
â”‚
â”œâ”€ Validation checks
â”‚  â”œâ”€ Has windows? âœ“
â”‚  â””â”€ Has client? âœ“
â”‚
â”œâ”€ Call PDF generator
â”‚  â””â”€ await generateQuotationPDF(quotationData)
â”‚
â”œâ”€ PDF Generation starts (in pdfGenerator.js)
â”‚  â”‚
â”‚  â”œâ”€ Initialize: new jsPDF()
â”‚  â”‚  â””â”€ Time: ~5ms
â”‚  â”‚
â”‚  â”œâ”€ Page 1: Introduction
â”‚  â”‚  â”œâ”€ Add header (50ms)
â”‚  â”‚  â”œâ”€ Add quote info (20ms)
â”‚  â”‚  â”œâ”€ Add client (30ms)
â”‚  â”‚  â””â”€ Add intro text (40ms)
â”‚  â”‚
â”‚  â”œâ”€ Window Pages (loop)
â”‚  â”‚  â”œâ”€ Window 1
â”‚  â”‚  â”‚  â”œâ”€ New page (10ms)
â”‚  â”‚  â”‚  â”œâ”€ Header (50ms)
â”‚  â”‚  â”‚  â”œâ”€ Basic table (60ms)
â”‚  â”‚  â”‚  â”œâ”€ Diagram rendering (200ms) â† html2canvas
â”‚  â”‚  â”‚  â”œâ”€ Specs table (80ms)
â”‚  â”‚  â”‚  â””â”€ Values table (70ms)
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Window 2
â”‚  â”‚  â”‚  â””â”€ ... (same)
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ Window N
â”‚  â”‚     â””â”€ ... (same)
â”‚  â”‚
â”‚  â”œâ”€ Summary Page
â”‚  â”‚  â”œâ”€ New page (10ms)
â”‚  â”‚  â”œâ”€ Header (50ms)
â”‚  â”‚  â”œâ”€ Totals table (100ms)
â”‚  â”‚  â””â”€ Terms (60ms)
â”‚  â”‚
â”‚  â”œâ”€ Add page numbers to all pages (30ms)
â”‚  â”‚
â”‚  â””â”€ Save PDF (100ms)
â”‚     â””â”€ Triggers browser download
â”‚
â”œâ”€ Return result
â”‚  â””â”€ { success: true, fileName: "..." }
â”‚
â”œâ”€ Show alert
â”‚  â””â”€ "PDF generated successfully"
â”‚
â””â”€ PDF downloaded to user's computer
   â””â”€ Total time: ~1-3 seconds (depending on # of windows)
```

---

## Error Handling Flow

```
User Action
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                     â”‚
    â–¼                                     â–¼
No Windows?                          No Client?
    â”‚                                     â”‚
    â””â”€â–º Alert: "Add windows"              â””â”€â–º Alert: "Select client"
         â†“                                     â†“
       STOP                                 STOP

    â–¼
All Valid
    â”‚
    â”œâ”€ Try PDF Generation
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                     â”‚
    â–¼                                     â–¼
Success?                             Error?
    â”‚                                     â”‚
    â”œâ”€â–º Return { success: true }          â”œâ”€â–º Catch error
    â”‚   Alert: "PDF generated"            â”‚   Console.error()
    â”‚   â†“                                 â”‚   Return { success: false, error }
    â”‚   Download PDF                      â”‚   Alert: "Error occurred"
    â”‚                                     â”‚   â†“
    â”‚                                     â”‚   User can retry
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document Version**: 1.0  
**Date**: October 20, 2025  
**Status**: Complete âœ…
